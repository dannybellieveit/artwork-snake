<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>File Share - Test</title>
  <base href="/" />
  <link rel="stylesheet" href="/style.css">
  <style>
    :root{
      --bg      : #87CEEB;
      --btn     : #5AB4E5;
      --btn-dk  : #3F93C8;
    }

    html,body{
      margin:0;
      background:var(--bg);
      color:#000;
    }

    header{
      position:relative;
      padding:1.2rem 1rem 0;
      text-align:center;
    }

    header h1{
      margin:0;
      font-size:clamp(1.6rem,4vw,2.2rem);
      font-weight:700;
      letter-spacing:.02em;
    }

    #drop-content{
      max-width:1200px;
      width:min(100%,90vw);
      margin:3.5rem auto 2.5rem;
      padding:0 1rem;
      display:grid;
      gap:2rem;
      text-align:center;
    }

    .file-item h2{
      margin:0 0 .7rem;
      font-size:1.15rem;
      font-weight:600;
      word-break:break-all;
      text-align:center;
    }

    .file-item audio{
      width:100%;
      margin:.6rem 0 1.1rem;
      outline:none;
      border-radius:8px;
    }

    .download{
      display:block;
      width:max-content;
      margin:0 auto;
      text-align:center;
      background:var(--btn);
      color:#fff;
      text-decoration:none;
      padding:.65rem 1.2rem;
      border-radius:10px;
      font-weight:600;
      transition:background .15s ease;
    }
    .download:hover{ background:var(--btn-dk); }

    footer{
      text-align:center;
      margin:3rem 0 2rem;
      font-size:.95rem;
    }

    @media(max-width:600px){
      #drop-content{ gap:1.4rem; }
    }
  </style>
</head>
<body>

  <header>
    <h1>File Share (TEST)</h1>
  </header>

  <div id="drop-content">Loadingâ€¦</div>

  <footer>
    <ul class="contacts">
      <li><a href="/">Back to Home</a></li>
      <li><a href="test-more.html" id="more-link">More</a></li>
      <li><a href="https://instagram.com/dannycasio_" target="_blank" rel="noopener">Instagram</a></li>
    </ul>
  </footer>

  <script src="/shared-player.js"></script>
  <script>
    document.getElementById('more-link').addEventListener('click', () => {
      sessionStorage.setItem('discographyReferrer', 'test-drop');
    });
  </script>

  <script>
  (async () => {
    const box = document.getElementById('drop-content');

    const demoTracks = [
      {
        name: 'Demo Track 1',
        url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
        mime: 'audio/mpeg'
      },
      {
        name: 'Demo Track 2',
        url: 'https://interactive-examples.mdn.mozilla.net/media/cc0-audio/t-rex-roar.mp3',
        mime: 'audio/mpeg'
      }
    ];

    function render(name, url, mime=''){
      const wrap = document.createElement('section');
      wrap.className = 'file-item';

      const title = document.createElement('h2');
      title.textContent = name;
      wrap.appendChild(title);

      if (/^audio\//.test(mime) || /\.(mp3|wav|ogg)$/i.test(name)) {
        const audio = document.createElement('audio');
        audio.controls = true;
        audio.crossOrigin = 'anonymous';
        audio.src = url;
        audio.style.width = '100%';
        wrap.appendChild(audio);
      }

      const downloadBtn = document.createElement('a');
      downloadBtn.className = 'download';
      downloadBtn.href = url;
      downloadBtn.download = name;
      downloadBtn.textContent = 'Download';
      wrap.appendChild(downloadBtn);

      box.appendChild(wrap);
    }

    box.innerHTML = '';
    demoTracks.forEach(track => {
      render(track.name, track.url, track.mime);
    });
  })();
  </script>

</body>
</html>
